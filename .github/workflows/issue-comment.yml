name: Issue Auto Comment

on:
  issues:
    types: [opened, reopened, labeled]

jobs:
  comment:
    runs-on: ubuntu-latest
    steps:
      - name: Welcome comment on new issue
        if: github.event.action == 'opened'
        uses: actions/github-script@v6
        with:
          script: |
            const { owner, repo } = context.repo;
            const { number: issue_number } = context.issue;
            const { login: author } = context.payload.issue.user;
            const issue = context.payload.issue;

            const welcomeMessage = `## ğŸ‘‹ ì´ìŠˆë¥¼ ìƒì„±í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!

            ì•ˆë…•í•˜ì„¸ìš” @${author}ë‹˜! ì´ìŠˆë¥¼ ì œì¶œí•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.

            ### ğŸ“‹ ì´ìŠˆ ì²˜ë¦¬ ê³¼ì •
            1. **ë¶„ë¥˜**: ìë™ìœ¼ë¡œ ë¼ë²¨ì´ ì§€ì •ë˜ê³  ë‹´ë‹¹ìê°€ í• ë‹¹ë©ë‹ˆë‹¤
            2. **ê²€í† **: ë‹´ë‹¹ìê°€ ì´ìŠˆë¥¼ ê²€í† í•˜ê³  ìš°ì„ ìˆœìœ„ë¥¼ ê²°ì •í•©ë‹ˆë‹¤
            3. **ì§„í–‰**: ê°œë°œ ê³„íšì— ë”°ë¼ ì‘ì—…ì´ ì§„í–‰ë©ë‹ˆë‹¤
            4. **ì™„ë£Œ**: ì‘ì—… ì™„ë£Œ í›„ ì´ìŠˆê°€ ë‹«í™ë‹ˆë‹¤

            ### ğŸ” ìë™ ë¶„ë¥˜ ê²°ê³¼
            **ì´ìŠˆ ìœ í˜•**: ${issue.title.toLowerCase().includes('bug') ? 'ğŸ› ë²„ê·¸' : 
                           issue.title.toLowerCase().includes('feature') ? 'âœ¨ ê¸°ëŠ¥ ìš”ì²­' : 
                           issue.title.toLowerCase().includes('enhancement') ? 'ğŸš€ ê°œì„ ì‚¬í•­' : 
                           issue.title.toLowerCase().includes('question') ? 'â“ ì§ˆë¬¸' : 
                           issue.title.toLowerCase().includes('doc') ? 'ğŸ“š ë¬¸ì„œ' : 'ğŸ“ ì¼ë°˜'}

            ### â° ì˜ˆìƒ ì‘ë‹µ ì‹œê°„
            - **ë²„ê·¸**: 1-2ì¼ ë‚´ ì‘ë‹µ
            - **ê¸°ëŠ¥ ìš”ì²­**: 3-5ì¼ ë‚´ ì‘ë‹µ  
            - **ì§ˆë¬¸**: 24ì‹œê°„ ë‚´ ì‘ë‹µ
            - **ë¬¸ì„œ**: 2-3ì¼ ë‚´ ì‘ë‹µ

            ### ğŸ“ ì¶”ê°€ ì •ë³´ê°€ í•„ìš”í•œ ê²½ìš°
            ë” ìì„¸í•œ ì •ë³´ê°€ í•„ìš”í•˜ë©´ ëŒ“ê¸€ë¡œ ìš”ì²­ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹ ë¥¸ í•´ê²°ì„ ìœ„í•´ ë‹¤ìŒ ì •ë³´ë¥¼ ë¯¸ë¦¬ ì¤€ë¹„í•´ì£¼ì„¸ìš”:

            - ğŸ–¥ï¸ **í™˜ê²½ ì •ë³´**: OS, Python ë²„ì „, ë¸Œë¼ìš°ì € ë“±
            - ğŸ“¸ **ìŠ¤í¬ë¦°ìƒ·**: ë¬¸ì œ ìƒí™©ì˜ ìŠ¤í¬ë¦°ìƒ·
            - ğŸ“ **ë¡œê·¸**: ì—ëŸ¬ ë©”ì‹œì§€ë‚˜ ê´€ë ¨ ë¡œê·¸
            - ğŸ”„ **ì¬í˜„ ë‹¨ê³„**: ë¬¸ì œë¥¼ ì¬í˜„í•  ìˆ˜ ìˆëŠ” ë‹¨ê³„ë³„ ì„¤ëª…

            ---
            *ì´ ëŒ“ê¸€ì€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.*`;

            await github.rest.issues.createComment({
              owner,
              repo,
              issue_number,
              body: welcomeMessage
            });

      - name: Comment on issue reopen
        if: github.event.action == 'reopened'
        uses: actions/github-script@v6
        with:
          script: |
            const { owner, repo } = context.repo;
            const { number: issue_number } = context.issue;

            const reopenMessage = `## ğŸ”„ ì´ìŠˆê°€ ë‹¤ì‹œ ì—´ë ¸ìŠµë‹ˆë‹¤

            ì´ìŠˆê°€ ë‹¤ì‹œ ì—´ë ¸ìŠµë‹ˆë‹¤. ë‹´ë‹¹ìê°€ í™•ì¸í•˜ê³  ì ì ˆí•œ ì¡°ì¹˜ë¥¼ ì·¨í•˜ê² ìŠµë‹ˆë‹¤.

            **ì¬ì˜¤í”ˆ ì‹œê°„**: ${new Date().toLocaleString('ko-KR', { timeZone: 'Asia/Seoul' })}

            ### ğŸ“‹ ë‹¤ìŒ ë‹¨ê³„
            1. ë‹´ë‹¹ìê°€ ì´ìŠˆ ìƒíƒœë¥¼ ì¬ê²€í† í•©ë‹ˆë‹¤
            2. í•„ìš”ì‹œ ì¶”ê°€ ì •ë³´ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
            3. í•´ê²° ë°©ì•ˆì„ ë‹¤ì‹œ ê²€í† í•©ë‹ˆë‹¤

            ---
            *ì´ ëŒ“ê¸€ì€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.*`;

            await github.rest.issues.createComment({
              owner,
              repo,
              issue_number,
              body: reopenMessage
            });

      - name: Comment on priority labeling
        if: github.event.action == 'labeled' && contains(github.event.label.name, 'priority:')
        uses: actions/github-script@v6
        with:
          script: |
            const { owner, repo } = context.repo;
            const { number: issue_number } = context.issue;
            const labelName = context.payload.label.name;

            let priorityInfo = '';
            let expectedTime = '';

            if (labelName === 'priority: critical') {
              priorityInfo = 'ğŸš¨ **ì¹˜ëª…ì  ìš°ì„ ìˆœìœ„**ë¡œ ë¶„ë¥˜ë˜ì—ˆìŠµë‹ˆë‹¤';
              expectedTime = 'ì¦‰ì‹œ ì²˜ë¦¬ ì˜ˆì •';
            } else if (labelName === 'priority: high') {
              priorityInfo = 'ğŸ”¥ **ë†’ì€ ìš°ì„ ìˆœìœ„**ë¡œ ë¶„ë¥˜ë˜ì—ˆìŠµë‹ˆë‹¤';
              expectedTime = '1-2ì¼ ë‚´ ì²˜ë¦¬ ì˜ˆì •';
            } else if (labelName === 'priority: medium') {
              priorityInfo = 'ğŸ“‹ **ë³´í†µ ìš°ì„ ìˆœìœ„**ë¡œ ë¶„ë¥˜ë˜ì—ˆìŠµë‹ˆë‹¤';
              expectedTime = '1ì£¼ì¼ ë‚´ ì²˜ë¦¬ ì˜ˆì •';
            } else if (labelName === 'priority: low') {
              priorityInfo = 'ğŸ“ **ë‚®ì€ ìš°ì„ ìˆœìœ„**ë¡œ ë¶„ë¥˜ë˜ì—ˆìŠµë‹ˆë‹¤';
              expectedTime = 'ì‹œê°„ ì—¬ìœ ê°€ ìˆì„ ë•Œ ì²˜ë¦¬ ì˜ˆì •';
            }

            const priorityMessage = `## ğŸ·ï¸ ìš°ì„ ìˆœìœ„ê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤

            ${priorityInfo}

            **ì˜ˆìƒ ì²˜ë¦¬ ì‹œê°„**: ${expectedTime}

            ìš°ì„ ìˆœìœ„ëŠ” ë‹¤ìŒ ìš”ì†Œë“¤ì„ ê³ ë ¤í•˜ì—¬ ê²°ì •ë©ë‹ˆë‹¤:
            - ğŸ¯ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜í–¥ë„
            - ğŸ‘¥ ì‚¬ìš©ì ì˜í–¥ ë²”ìœ„  
            - ğŸ”§ ê¸°ìˆ ì  ë³µì¡ë„
            - ğŸ“… ë¦´ë¦¬ìŠ¤ ì¼ì •

            ---
            *ì´ ëŒ“ê¸€ì€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.*`;

            await github.rest.issues.createComment({
              owner,
              repo,
              issue_number,
              body: priorityMessage
            });

      - name: Comment on bug label
        if: |
          github.event.action == 'labeled' && 
          github.event.label.name == 'type: bug'
        uses: actions/github-script@v6
        with:
          script: |
            const { owner, repo } = context.repo;
            const { number: issue_number } = context.issue;

            const bugMessage = `## ğŸ› ë²„ê·¸ë¡œ ë¶„ë¥˜ë˜ì—ˆìŠµë‹ˆë‹¤

            ì´ ì´ìŠˆê°€ ë²„ê·¸ë¡œ ë¶„ë¥˜ë˜ì—ˆìŠµë‹ˆë‹¤. ë¹ ë¥¸ í•´ê²°ì„ ìœ„í•´ ë‹¤ìŒ ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”:

            ### ğŸ“‹ ë²„ê·¸ ë¦¬í¬íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸
            - [ ] **ì¬í˜„ ë‹¨ê³„**ê°€ ëª…í™•íˆ ê¸°ìˆ ë˜ì–´ ìˆë‚˜ìš”?
            - [ ] **ì˜ˆìƒ ê²°ê³¼**ì™€ **ì‹¤ì œ ê²°ê³¼**ê°€ êµ¬ë¶„ë˜ì–´ ìˆë‚˜ìš”?
            - [ ] **í™˜ê²½ ì •ë³´** (OS, Python ë²„ì „ ë“±)ê°€ í¬í•¨ë˜ì–´ ìˆë‚˜ìš”?
            - [ ] **ì—ëŸ¬ ë©”ì‹œì§€**ë‚˜ **ë¡œê·¸**ê°€ ì²¨ë¶€ë˜ì–´ ìˆë‚˜ìš”?
            - [ ] **ìŠ¤í¬ë¦°ìƒ·**ì´ë‚˜ **ë™ì˜ìƒ**ì´ ìˆë‹¤ë©´ ë„ì›€ì´ ë©ë‹ˆë‹¤

            ### ğŸ” ë””ë²„ê¹… ë„ì›€ë§
            ë¬¸ì œ í•´ê²°ì— ë„ì›€ì´ ë˜ëŠ” ì¶”ê°€ ì •ë³´:
            1. **ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬** ì½˜ì†” ë©”ì‹œì§€
            2. **ë„¤íŠ¸ì›Œí¬ íƒ­**ì—ì„œ ì‹¤íŒ¨í•œ ìš”ì²­
            3. **ë°±ì—”ë“œ ë¡œê·¸** (í•´ë‹¹í•˜ëŠ” ê²½ìš°)
            4. **íŠ¹ì • ë°ì´í„°**ë‚˜ **ì…ë ¥ê°’**ìœ¼ë¡œë§Œ ë°œìƒí•˜ëŠ”ì§€ ì—¬ë¶€

            ### âš¡ ì„ì‹œ í•´ê²°ë°©ë²•
            ê°€ëŠ¥í•œ ì„ì‹œ í•´ê²°ë°©ë²•ì´ ìˆë‹¤ë©´ ê³µìœ í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

            ---
            *ì´ ëŒ“ê¸€ì€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.*`;

            await github.rest.issues.createComment({
              owner,
              repo,
              issue_number,
              body: bugMessage
            });

      - name: Comment on feature request
        if: |
          github.event.action == 'labeled' && 
          github.event.label.name == 'type: feature'
        uses: actions/github-script@v6
        with:
          script: |
            const { owner, repo } = context.repo;
            const { number: issue_number } = context.issue;

            const featureMessage = `## âœ¨ ê¸°ëŠ¥ ìš”ì²­ìœ¼ë¡œ ë¶„ë¥˜ë˜ì—ˆìŠµë‹ˆë‹¤

            ìƒˆë¡œìš´ ê¸°ëŠ¥ ìš”ì²­ì„ í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! 

            ### ğŸ“‹ ê¸°ëŠ¥ ìš”ì²­ ê²€í†  ê³¼ì •
            1. **ìš”êµ¬ì‚¬í•­ ë¶„ì„**: ê¸°ëŠ¥ì˜ í•„ìš”ì„±ê³¼ ë²”ìœ„ë¥¼ ê²€í† í•©ë‹ˆë‹¤
            2. **ê¸°ìˆ ì  ê²€í† **: êµ¬í˜„ ê°€ëŠ¥ì„±ê³¼ ë³µì¡ë„ë¥¼ í‰ê°€í•©ë‹ˆë‹¤
            3. **ìš°ì„ ìˆœìœ„ ê²°ì •**: ë‹¤ë¥¸ ì‘ì—…ë“¤ê³¼ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ê²°ì •í•©ë‹ˆë‹¤
            4. **ê°œë°œ ê³„íš**: êµ¬í˜„ ì¼ì •ì„ ìˆ˜ë¦½í•©ë‹ˆë‹¤

            ### ğŸ’¡ ê¸°ëŠ¥ ìš”ì²­ ê°œì„ ì„ ìœ„í•œ ì§ˆë¬¸
            ë” ë‚˜ì€ ê¸°ëŠ¥ì„ ë§Œë“¤ê¸° ìœ„í•´ ë‹¤ìŒ ì‚¬í•­ë“¤ì„ ê³ ë ¤í•´ì£¼ì„¸ìš”:

            - **ì‚¬ìš© ì‚¬ë¡€**: ì–´ë–¤ ìƒí™©ì—ì„œ ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì‹œë‚˜ìš”?
            - **í˜„ì¬ ë¬¸ì œì **: í˜„ì¬ ì–´ë–¤ ë¶ˆí¸í•¨ì´ ìˆë‚˜ìš”?
            - **ì˜ˆìƒ ì‚¬ìš©ë¹ˆë„**: ì–¼ë§ˆë‚˜ ìì£¼ ì‚¬ìš©í•  ê²ƒ ê°™ë‚˜ìš”?
            - **ëŒ€ì•ˆ**: ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆë‚˜ìš”?
            - **UI/UX**: ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ë©´ ì¢‹ì„ê¹Œìš”?

            ### ğŸ¯ êµ¬í˜„ ìš°ì„ ìˆœìœ„ ìš”ì†Œ
            - ğŸ“Š ì‚¬ìš©ì ìš”ì²­ ë¹ˆë„
            - ğŸ¯ ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜
            - ğŸ”§ êµ¬í˜„ ë³µì¡ë„
            - ğŸ“… ë¡œë“œë§µ ì í•©ì„±

            ---
            *ì´ ëŒ“ê¸€ì€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.*`;

            await github.rest.issues.createComment({
              owner,
              repo,
              issue_number,
              body: featureMessage
            });
